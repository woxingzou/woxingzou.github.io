import{_ as d,c,a as h,b as l,d as e,e as s,r as p,o,f as n}from"./app-BXZRU3cw.js";const k={},u={class:"vp-file-tree"},m={class:"tree-node folder"},g={class:"tree-node folder"},v={class:"tree-node folder"},b={class:"tree-node folder"},y={class:"tree-node file"},f={class:"tree-node file"},A={class:"tree-node file"},x={class:"tree-node file"},D={class:"tree-node file"};function B(_,i){const a=p("VPIcon"),t=p("FileTreeItem"),r=p("VPCard");return o(),c("div",null,[i[15]||(i[15]=h('<div class="hint-container warning"><p class="hint-container-title">注意</p><p>以下操作都在Ubuntu环境下进行，也可在其他Linux系统下操作，但如果出现问题请自行解决。</p></div><div class="hint-container warning"><p class="hint-container-title">注意</p><p>使用non-root用户启动容器，默认当前用户，如有需要请自行更改</p></div><h2 id="docker工作目录树" tabindex="-1"><a class="header-anchor" href="#docker工作目录树"><span>docker工作目录树</span></a></h2>',3)),l(r,null,{default:e(()=>[s("div",u,[s("ul",null,[l(t,{type:"folder",expanded:!0,empty:!1},{default:e(()=>[s("span",m,[l(a,{name:"vscode-icons:default-folder"}),i[0]||(i[0]=s("span",{class:"name"},"docker",-1))]),s("ul",null,[l(t,{type:"folder",expanded:!0,empty:!1},{default:e(()=>[s("span",g,[l(a,{name:"vscode-icons:default-folder"}),i[1]||(i[1]=s("span",{class:"name"},"nginx",-1))]),s("ul",null,[l(t,{type:"folder",expanded:!0,empty:!1},{default:e(()=>[s("span",v,[l(a,{name:"vscode-icons:folder-type-config"}),i[2]||(i[2]=s("span",{class:"name"},"conf",-1))]),s("ul",null,[l(t,{type:"folder",expanded:!0,empty:!1},{default:e(()=>[s("span",b,[l(a,{name:"vscode-icons:default-folder"}),i[3]||(i[3]=s("span",{class:"name"},"conf.d",-1))]),s("ul",null,[l(t,{type:"file",expanded:!1,empty:!0},{default:e(()=>[s("span",y,[l(a,{name:"vscode-icons:file-type-config"}),i[4]||(i[4]=s("span",{class:"name"},"default.conf",-1))])]),_:1})])]),_:1}),l(t,{type:"file",expanded:!1,empty:!0},{default:e(()=>[s("span",f,[l(a,{name:"vscode-icons:file-type-config"}),i[5]||(i[5]=s("span",{class:"name"},"nginx.conf",-1))])]),_:1})])]),_:1}),l(t,{type:"file",expanded:!1,empty:!0},{default:e(()=>[s("span",A,[l(a,{name:"vscode-icons:file-type-docker"}),i[6]||(i[6]=s("span",{class:"name"},"Dockerfile",-1))])]),_:1})])]),_:1}),l(t,{type:"file",expanded:!1,empty:!0},{default:e(()=>[s("span",x,[l(a,{name:"vscode-icons:file-type-light-yaml"}),i[7]||(i[7]=s("span",{class:"name"},"compose.yaml",-1))])]),_:1}),l(t,{type:"file",expanded:!1,empty:!0},{default:e(()=>[s("span",D,[l(a,{name:"vscode-icons:file-type-dotenv"}),i[8]||(i[8]=s("span",{class:"name"},".env",-1))])]),_:1})])]),_:1})])])]),_:1}),i[16]||(i[16]=s("h2",{id:"新建docker工作目录",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#新建docker工作目录"},[s("span",null,"新建docker工作目录")])],-1)),l(r,null,{default:e(()=>i[9]||(i[9]=[s("div",{class:"language-shell line-numbers-mode","data-ext":"shell","data-title":"shell"},[s("button",{class:"copy",title:"复制代码","data-copied":"已复制"}),s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark vp-code"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#59873A","--shiki-dark":"#80A665"}},"mkdir"),s("span",{style:{"--shiki-light":"#A65E2B","--shiki-dark":"#C99076"}}," -p"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," docker"),s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}}," &&"),s("span",{style:{"--shiki-light":"#998418","--shiki-dark":"#B8A965"}}," cd"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," docker")])])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"})])],-1)])),_:1}),i[17]||(i[17]=s("h2",{id:"创建dockerfile用来自定义构建容器",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#创建dockerfile用来自定义构建容器"},[s("span",null,"创建Dockerfile用来自定义构建容器")])],-1)),l(r,null,{default:e(()=>i[10]||(i[10]=[s("div",{class:"vp-steps"},[s("ol",null,[s("li",null,"新建nginx目录、conf配置目录")]),s("div",{class:"language-shell line-numbers-mode","data-ext":"shell","data-title":"shell"},[s("button",{class:"copy",title:"复制代码","data-copied":"已复制"}),s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark vp-code"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#59873A","--shiki-dark":"#80A665"}},"mkdir"),s("span",{style:{"--shiki-light":"#A65E2B","--shiki-dark":"#C99076"}}," -p"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," nginx"),s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}}," &&"),s("span",{style:{"--shiki-light":"#998418","--shiki-dark":"#B8A965"}}," cd"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," nginx")]),n(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#59873A","--shiki-dark":"#80A665"}},"mkdir"),s("span",{style:{"--shiki-light":"#A65E2B","--shiki-dark":"#C99076"}}," -p"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," conf/conf.d")])])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"}),s("div",{class:"line-number"})])]),s("ol",{start:"2"},[s("li",null,"创建nginx.conf和default.conf配置文件")]),s("div",{class:"hint-container warning"},[s("p",{class:"hint-container-title"},"注意"),s("p",null,"注意目录结构")]),s("details",{class:"hint-container details"},[s("summary",null,"点我查看nginx.conf配置"),s("div",{class:"language-nginx.conf line-numbers-mode","data-ext":"nginx.conf","data-title":"nginx.conf"},[s("button",{class:"copy",title:"复制代码","data-copied":"已复制"}),s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark vp-code"},[s("code",null,[s("span",{class:"line"},[s("span",null,"# user  nginx;")]),n(`
`),s("span",{class:"line"},[s("span",null,"worker_processes  auto;")]),n(`
`),s("span",{class:"line"},[s("span")]),n(`
`),s("span",{class:"line"},[s("span",null,"error_log  /nginx/log/error.log notice;")]),n(`
`),s("span",{class:"line"},[s("span",null,"pid        /nginx/nginx.pid;")]),n(`
`),s("span",{class:"line"},[s("span")]),n(`
`),s("span",{class:"line"},[s("span")]),n(`
`),s("span",{class:"line"},[s("span",null,"events {")]),n(`
`),s("span",{class:"line"},[s("span",null,"    worker_connections  1024;")]),n(`
`),s("span",{class:"line"},[s("span",null,"}")]),n(`
`),s("span",{class:"line"},[s("span")]),n(`
`),s("span",{class:"line"},[s("span")]),n(`
`),s("span",{class:"line"},[s("span",null,"http {")]),n(`
`),s("span",{class:"line"},[s("span",null,"    include       /etc/nginx/mime.types;")]),n(`
`),s("span",{class:"line"},[s("span",null,"    default_type  application/octet-stream;")]),n(`
`),s("span",{class:"line"},[s("span")]),n(`
`),s("span",{class:"line"},[s("span",null,`    log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '`)]),n(`
`),s("span",{class:"line"},[s("span",null,`                      '$status $body_bytes_sent "$http_referer" '`)]),n(`
`),s("span",{class:"line"},[s("span",null,`                      '"$http_user_agent" "$http_x_forwarded_for"';`)]),n(`
`),s("span",{class:"line"},[s("span")]),n(`
`),s("span",{class:"line"},[s("span",null,"    access_log  /nginx/log/access.log  main;")]),n(`
`),s("span",{class:"line"},[s("span")]),n(`
`),s("span",{class:"line"},[s("span",null,"    sendfile        on;")]),n(`
`),s("span",{class:"line"},[s("span",null,"    #tcp_nopush     on;")]),n(`
`),s("span",{class:"line"},[s("span")]),n(`
`),s("span",{class:"line"},[s("span",null,"    keepalive_timeout  65;")]),n(`
`),s("span",{class:"line"},[s("span")]),n(`
`),s("span",{class:"line"},[s("span",null,"    ##")]),n(`
`),s("span",{class:"line"},[s("span",null,"    # SSL Settings")]),n(`
`),s("span",{class:"line"},[s("span",null,"    ##")]),n(`
`),s("span",{class:"line"},[s("span",null,"    ssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3; # Dropping SSLv3, ref: POODLE")]),n(`
`),s("span",{class:"line"},[s("span",null,"    ssl_prefer_server_ciphers on;")]),n(`
`),s("span",{class:"line"},[s("span")]),n(`
`),s("span",{class:"line"},[s("span",null,"    ##")]),n(`
`),s("span",{class:"line"},[s("span",null,"    # Gzip Settings")]),n(`
`),s("span",{class:"line"},[s("span",null,"    ##")]),n(`
`),s("span",{class:"line"},[s("span",null,"    gzip  on;")]),n(`
`),s("span",{class:"line"},[s("span",null,"    gzip_min_length 1k;     # 设置允许压缩的页面最小字节数")]),n(`
`),s("span",{class:"line"},[s("span",null,"    gzip_buffers 4 16k;     # 用来存储 gzip 的压缩结果")]),n(`
`),s("span",{class:"line"},[s("span",null,"    gzip_http_version 1.1;  # 识别 HTTP 协议版本")]),n(`
`),s("span",{class:"line"},[s("span",null,"    gzip_comp_level 2;      # 设置 gzip 的压缩比 1-9. 1 压缩比最小但最快, 而 9 相反")]),n(`
`),s("span",{class:"line"},[s("span",null,"    gzip_types text/plain application/x-javascript text/css application/xml application/javascript; # 指定压缩类型")]),n(`
`),s("span",{class:"line"},[s("span",null,"    gzip_proxied any;       # 无论后端服务器的 headers 头返回什么信息，都无条件启用压缩")]),n(`
`),s("span",{class:"line"},[s("span",null,"    # gzip_vary on;")]),n(`
`),s("span",{class:"line"},[s("span",null,"    # gzip_proxied any;")]),n(`
`),s("span",{class:"line"},[s("span",null,"    # gzip_comp_level 6;")]),n(`
`),s("span",{class:"line"},[s("span",null,"    # gzip_buffers 16 8k;")]),n(`
`),s("span",{class:"line"},[s("span",null,"    # gzip_http_version 1.1;")]),n(`
`),s("span",{class:"line"},[s("span",null,"    # gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;")]),n(`
`),s("span",{class:"line"},[s("span")]),n(`
`),s("span",{class:"line"},[s("span",null,"    ##")]),n(`
`),s("span",{class:"line"},[s("span",null,"    # Virtual Host Configs")]),n(`
`),s("span",{class:"line"},[s("span",null,"    ##")]),n(`
`),s("span",{class:"line"},[s("span",null,"    include /etc/nginx/conf.d/*.conf;")]),n(`
`),s("span",{class:"line"},[s("span",null,"}")])])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])])]),s("details",{class:"hint-container details"},[s("summary",null,"点我查看default.conf配置"),s("div",{class:"language-default.conf line-numbers-mode","data-ext":"default.conf","data-title":"default.conf"},[s("button",{class:"copy",title:"复制代码","data-copied":"已复制"}),s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark vp-code"},[s("code",null,[s("span",{class:"line"},[s("span",null,"server {")]),n(`
`),s("span",{class:"line"},[s("span",null,"    listen       80;")]),n(`
`),s("span",{class:"line"},[s("span",null,"    listen  [::]:80;")]),n(`
`),s("span",{class:"line"},[s("span",null,"    server_name  localhost;")]),n(`
`),s("span",{class:"line"},[s("span")]),n(`
`),s("span",{class:"line"},[s("span",null,"    #access_log  /var/log/nginx/host.access.log  main;")]),n(`
`),s("span",{class:"line"},[s("span")]),n(`
`),s("span",{class:"line"},[s("span",null,"    location / {")]),n(`
`),s("span",{class:"line"},[s("span",null,"        root   /usr/share/nginx/html;")]),n(`
`),s("span",{class:"line"},[s("span",null,"        index  index.html index.htm;")]),n(`
`),s("span",{class:"line"},[s("span",null,"    }")]),n(`
`),s("span",{class:"line"},[s("span")]),n(`
`),s("span",{class:"line"},[s("span",null,"    #error_page  404              /404.html;")]),n(`
`),s("span",{class:"line"},[s("span")]),n(`
`),s("span",{class:"line"},[s("span",null,"    # redirect server error pages to the static page /50x.html")]),n(`
`),s("span",{class:"line"},[s("span",null,"    #")]),n(`
`),s("span",{class:"line"},[s("span",null,"    error_page   500 502 503 504  /50x.html;")]),n(`
`),s("span",{class:"line"},[s("span",null,"    location = /50x.html {")]),n(`
`),s("span",{class:"line"},[s("span",null,"        root   /usr/share/nginx/html;")]),n(`
`),s("span",{class:"line"},[s("span",null,"    }")]),n(`
`),s("span",{class:"line"},[s("span")]),n(`
`),s("span",{class:"line"},[s("span",null,"    # proxy the PHP scripts to Apache listening on 127.0.0.1:80")]),n(`
`),s("span",{class:"line"},[s("span",null,"    #")]),n(`
`),s("span",{class:"line"},[s("span",null,"    #location ~ \\.php$ {")]),n(`
`),s("span",{class:"line"},[s("span",null,"    #    proxy_pass   http://127.0.0.1;")]),n(`
`),s("span",{class:"line"},[s("span",null,"    #}")]),n(`
`),s("span",{class:"line"},[s("span")]),n(`
`),s("span",{class:"line"},[s("span",null,"    # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000")]),n(`
`),s("span",{class:"line"},[s("span",null,"    #")]),n(`
`),s("span",{class:"line"},[s("span",null,"    #location ~ \\.php$ {")]),n(`
`),s("span",{class:"line"},[s("span",null,"    #    root           html;")]),n(`
`),s("span",{class:"line"},[s("span",null,"    #    fastcgi_pass   127.0.0.1:9000;")]),n(`
`),s("span",{class:"line"},[s("span",null,"    #    fastcgi_index  index.php;")]),n(`
`),s("span",{class:"line"},[s("span",null,"    #    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;")]),n(`
`),s("span",{class:"line"},[s("span",null,"    #    include        fastcgi_params;")]),n(`
`),s("span",{class:"line"},[s("span",null,"    #}")]),n(`
`),s("span",{class:"line"},[s("span")]),n(`
`),s("span",{class:"line"},[s("span",null,"    # deny access to .htaccess files, if Apache's document root")]),n(`
`),s("span",{class:"line"},[s("span",null,"    # concurs with nginx's one")]),n(`
`),s("span",{class:"line"},[s("span",null,"    #")]),n(`
`),s("span",{class:"line"},[s("span",null,"    #location ~ /\\.ht {")]),n(`
`),s("span",{class:"line"},[s("span",null,"    #    deny  all;")]),n(`
`),s("span",{class:"line"},[s("span",null,"    #}")]),n(`
`),s("span",{class:"line"},[s("span",null,"}")])])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])])]),s("ol",{start:"3"},[s("li",null,"创建Dockerfile文件")]),s("div",{class:"language-dockerfile line-numbers-mode","data-ext":"dockerfile","data-title":"dockerfile"},[s("button",{class:"copy",title:"复制代码","data-copied":"已复制"}),s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark vp-code"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#1E754F","--shiki-dark":"#4D9375"}},"FROM"),s("span",{style:{"--shiki-light":"#393A34","--shiki-dark":"#DBD7CAEE"}}," nginx:1.27.3-alpine")]),n(`
`),s("span",{class:"line"}),n(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#1E754F","--shiki-dark":"#4D9375"}},"ARG"),s("span",{style:{"--shiki-light":"#393A34","--shiki-dark":"#DBD7CAEE"}}," UID")]),n(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#1E754F","--shiki-dark":"#4D9375"}},"ARG"),s("span",{style:{"--shiki-light":"#393A34","--shiki-dark":"#DBD7CAEE"}}," GID")]),n(`
`),s("span",{class:"line"}),n(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#1E754F","--shiki-dark":"#4D9375"}},"RUN"),s("span",{style:{"--shiki-light":"#393A34","--shiki-dark":"#DBD7CAEE"}}," chown -R $UID:$GID /var/cache/nginx")])])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])])],-1)])),_:1}),i[18]||(i[18]=s("h2",{id:"创建docker-compose配置文件-compose-yaml",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#创建docker-compose配置文件-compose-yaml"},[s("span",null,"创建docker compose配置文件 compose.yaml")])],-1)),l(r,null,{default:e(()=>i[11]||(i[11]=[s("div",{class:"hint-container warning"},[s("p",{class:"hint-container-title"},"注意"),s("ul",null,[s("li",null,[n("数据卷都挂载在 "),s("strong",null,"${HOME}/data/nginx"),n(" 目录下，请提前创建好对应目录，也可自行修改挂载目录")]),s("li",null,[s("strong",null,"nginx.conf"),n(" 配置文件需要拷贝到 "),s("strong",null,"${HOME}/data/nginx/conf"),n(" 目录下")]),s("li",null,[s("strong",null,"default.conf"),n(" 配置文件需要拷贝到 "),s("strong",null,"${HOME}/data/nginx/conf/conf.d"),n(" 目录下")])]),s("div",{class:"language-shell line-numbers-mode","data-ext":"shell","data-title":"shell"},[s("button",{class:"copy",title:"复制代码","data-copied":"已复制"}),s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark vp-code"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#59873A","--shiki-dark":"#80A665"}},"mkdir"),s("span",{style:{"--shiki-light":"#A65E2B","--shiki-dark":"#C99076"}}," -p"),s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}}," ${"),s("span",{style:{"--shiki-light":"#B07D48","--shiki-dark":"#BD976A"}},"HOME"),s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},"}"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}},"/data/nginx")]),n(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#59873A","--shiki-dark":"#80A665"}},"mkdir"),s("span",{style:{"--shiki-light":"#A65E2B","--shiki-dark":"#C99076"}}," -p"),s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}}," ${"),s("span",{style:{"--shiki-light":"#B07D48","--shiki-dark":"#BD976A"}},"HOME"),s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},"}"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}},"/data/nginx/conf/conf.d")])])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"}),s("div",{class:"line-number"})])])],-1),s("div",{class:"language-yaml line-numbers-mode","data-ext":"yaml","data-title":"yaml"},[s("button",{class:"copy",title:"复制代码","data-copied":"已复制"}),s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark vp-code"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#998418","--shiki-dark":"#B8A965"}},"services"),s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},":")]),n(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#998418","--shiki-dark":"#B8A965"}},"  nginx"),s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},":")]),n(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#998418","--shiki-dark":"#B8A965"}},"    build"),s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},":"),s("span",{style:{"--shiki-light":"#393A34","--shiki-dark":"#DBD7CAEE"}}," ")]),n(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#998418","--shiki-dark":"#B8A965"}},"      context"),s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},":"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," nginx")]),n(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#998418","--shiki-dark":"#B8A965"}},"      dockerfile"),s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},":"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," Dockerfile")]),n(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#998418","--shiki-dark":"#B8A965"}},"      args"),s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},":")]),n(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#998418","--shiki-dark":"#B8A965"}},"        UID"),s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},":"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," ${UID}")]),n(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#998418","--shiki-dark":"#B8A965"}},"        GID"),s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},":"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," ${GID}")]),n(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#998418","--shiki-dark":"#B8A965"}},"    image"),s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},":"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," nginx:1.27.3-alpine")]),n(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#998418","--shiki-dark":"#B8A965"}},"    container_name"),s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},":"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," nginx")]),n(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#998418","--shiki-dark":"#B8A965"}},"    restart"),s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},":"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," always")]),n(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#A0ADA0","--shiki-dark":"#758575DD"}},"    # non-root users are not allowed to bind to ports below 1024")]),n(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#A0ADA0","--shiki-dark":"#758575DD"}},'    # network_mode: "host"')]),n(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#998418","--shiki-dark":"#B8A965"}},"    user"),s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},":"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," ${UID}:${GID}")]),n(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#998418","--shiki-dark":"#B8A965"}},"    networks"),s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},":")]),n(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},"      -"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," docker_net0")]),n(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#998418","--shiki-dark":"#B8A965"}},"    ports"),s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},":")]),n(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},"      -"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," 80:80")]),n(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},"      -"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," 443:443")]),n(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#998418","--shiki-dark":"#B8A965"}},"    environment"),s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},":")]),n(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#998418","--shiki-dark":"#B8A965"}},"      TZ"),s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},":"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," Asia/Shanghai")]),n(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#998418","--shiki-dark":"#B8A965"}},"    volumes"),s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},":")]),n(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#A0ADA0","--shiki-dark":"#758575DD"}},"      # nginx目录挂载")]),n(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},"      -"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," ${HOME}/data/nginx:/nginx")]),n(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#A0ADA0","--shiki-dark":"#758575DD"}},"      # 配置文件挂载")]),n(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},"      -"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," ${HOME}/data/nginx/conf/nginx.conf:/etc/nginx/nginx.conf")]),n(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#A0ADA0","--shiki-dark":"#758575DD"}},"      # 配置目录挂载")]),n(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},"      -"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," ${HOME}/data/nginx/conf/conf.d:/etc/nginx/conf.d")]),n(`
`),s("span",{class:"line"}),n(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#998418","--shiki-dark":"#B8A965"}},"networks"),s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},":")]),n(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#A0ADA0","--shiki-dark":"#758575DD"}},"  # 自定义一个桥接网络")]),n(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#998418","--shiki-dark":"#B8A965"}},"  docker_net0"),s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},":")])])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1)])),_:1}),i[19]||(i[19]=s("h2",{id:"构建并启动",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#构建并启动"},[s("span",null,"构建并启动")])],-1)),l(r,null,{default:e(()=>i[12]||(i[12]=[s("div",{class:"language-shell line-numbers-mode","data-ext":"shell","data-title":"shell"},[s("button",{class:"copy",title:"复制代码","data-copied":"已复制"}),s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark vp-code"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#998418","--shiki-dark":"#B8A965"}},"echo"),s("span",{style:{"--shiki-light":"#A65E2B","--shiki-dark":"#C99076"}}," -e"),s("span",{style:{"--shiki-light":"#B5695977","--shiki-dark":"#C98A7D77"}},' "'),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}},"UID="),s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},"$("),s("span",{style:{"--shiki-light":"#59873A","--shiki-dark":"#80A665"}},"id"),s("span",{style:{"--shiki-light":"#A65E2B","--shiki-dark":"#C99076"}}," -u"),s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},")"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}},"\\nGID="),s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},"$("),s("span",{style:{"--shiki-light":"#59873A","--shiki-dark":"#80A665"}},"id"),s("span",{style:{"--shiki-light":"#A65E2B","--shiki-dark":"#C99076"}}," -g"),s("span",{style:{"--shiki-light":"#999999","--shiki-dark":"#666666"}},")"),s("span",{style:{"--shiki-light":"#B5695977","--shiki-dark":"#C98A7D77"}},'"'),s("span",{style:{"--shiki-light":"#AB5959","--shiki-dark":"#CB7676"}}," >"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," .env")]),n(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#59873A","--shiki-dark":"#80A665"}},"docker"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," compose"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," up"),s("span",{style:{"--shiki-light":"#A65E2B","--shiki-dark":"#C99076"}}," --build"),s("span",{style:{"--shiki-light":"#A65E2B","--shiki-dark":"#C99076"}}," -d"),s("span",{style:{"--shiki-light":"#B56959","--shiki-dark":"#C98A7D"}}," nginx")])])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1)])),_:1}),i[20]||(i[20]=s("h2",{id:"访问nginx",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#访问nginx"},[s("span",null,"访问Nginx")])],-1)),l(r,null,{default:e(()=>i[13]||(i[13]=[s("p",null,"浏览器访问 http://localhost",-1)])),_:1}),i[21]||(i[21]=s("h2",{id:"参考",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#参考"},[s("span",null,"参考")])],-1)),l(r,null,{default:e(()=>i[14]||(i[14]=[s("ul",null,[s("li",null,[s("a",{href:"https://docs.docker.com/manuals",target:"_blank",rel:"noopener noreferrer"},"Docker官方手册")]),s("li",null,[s("a",{href:"https://docs.docker.com/reference",target:"_blank",rel:"noopener noreferrer"},"Docker官方参考文档")])],-1)])),_:1})])}const E=d(k,[["render",B],["__file","index.html.vue"]]),$=JSON.parse('{"path":"/article/hzkb43o4/","title":"Docker安装nginx","lang":"zh-CN","frontmatter":{"title":"Docker安装nginx","tags":["docker","nginx"],"createTime":"2024/12/26 17:03:46","permalink":"/article/hzkb43o4/","description":"注意 以下操作都在Ubuntu环境下进行，也可在其他Linux系统下操作，但如果出现问题请自行解决。 注意 使用non-root用户启动容器，默认当前用户，如有需要请自行更改 docker工作目录树 新建docker工作目录 创建Dockerfile用来自定义构建容器 创建docker compose配置文件 compose.yaml 构建并启动 访问...","head":[["meta",{"property":"og:url","content":"https://blog.shaocz.me/article/hzkb43o4/"}],["meta",{"property":"og:site_name","content":"未眠的蓝鸟"}],["meta",{"property":"og:title","content":"Docker安装nginx"}],["meta",{"property":"og:description","content":"注意 以下操作都在Ubuntu环境下进行，也可在其他Linux系统下操作，但如果出现问题请自行解决。 注意 使用non-root用户启动容器，默认当前用户，如有需要请自行更改 docker工作目录树 新建docker工作目录 创建Dockerfile用来自定义构建容器 创建docker compose配置文件 compose.yaml 构建并启动 访问..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-01-01T06:09:32.000Z"}],["meta",{"property":"article:tag","content":"docker"}],["meta",{"property":"article:tag","content":"nginx"}],["meta",{"property":"article:modified_time","content":"2025-01-01T06:09:32.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Docker安装nginx\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-01-01T06:09:32.000Z\\",\\"author\\":[]}"]]},"headers":[],"readingTime":{"minutes":2.34,"words":702},"git":{"updatedTime":1735711772000,"contributors":[{"name":"huaihuashu","username":"huaihuashu","email":"october4th@88.com","commits":2,"avatar":"https://avatars.githubusercontent.com/huaihuashu?v=4","url":"https://github.com/huaihuashu"},{"name":"huaihuashu","username":"huaihuashu","email":"778559256@qq.com","commits":1,"avatar":"https://avatars.githubusercontent.com/huaihuashu?v=4","url":"https://github.com/huaihuashu"}]},"autoDesc":true,"filePathRelative":"docker/Docker安装nginx.md","categoryList":[{"id":"05b605","sort":10000,"name":"docker"}],"bulletin":false}');export{E as comp,$ as data};
