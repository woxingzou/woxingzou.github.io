import{_ as t,c as r,a as l,b as e,d as p,e as s,f as i,r as d,o as h}from"./app-BXZRU3cw.js";const k={};function c(u,n){const a=d("VPCard");return h(),r("div",null,[n[2]||(n[2]=l(`<div class="hint-container warning"><p class="hint-container-title">注意</p><p>以下操作都在Ubuntu环境下进行，也可在其他Linux系统下操作，出现问题请自行解决。</p></div><div class="hint-container warning"><p class="hint-container-title">注意</p><p>使用non-root用户启动容器，请提前创建好[uid:1000 gid:1000]的用户，可使用id命令查看当前用户是否符合。如果没有可使用以下命令创建，当然也可以修改compose.yaml中的user配置为你当前的用户</p><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> groupadd</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -g</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1000</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ubuntu</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 组名可自定义</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> useradd</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -u</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1000</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -g</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1000</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -m</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /bin/bash</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ubuntu</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 用户名可自定义</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p>已打包相关脚本与配置文件 <a href="https://github.com/woxingzou/blog/blob/gh-pages/files/wordpress-docker.zip" target="_blank" rel="noopener noreferrer">点击下载</a></p></div><h2 id="创建应用容器映射目录" tabindex="-1"><a class="header-anchor" href="#创建应用容器映射目录"><span>创建应用容器映射目录</span></a></h2><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#!/bin/bash</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">NGINX_DIR</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">$HOME</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/data/nginx</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">MYSQL_DIR</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">$HOME</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/data/mysql</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">WORDPRESS_DIR</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">$HOME</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/data/wordpress</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">CURRENT_DIR</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=$(</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">pwd</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">rm</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -rf</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> $NGINX_DIR</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> $MYSQL_DIR</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> $WORDPRESS_DIR</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 创建映射目录</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mkdir</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -p</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> $NGINX_DIR</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/conf/conf.d</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> $NGINX_DIR</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/log</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">         $MYSQL_DIR</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/conf</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> $MYSQL_DIR</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/data</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> $MYSQL_DIR</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/log</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> \\</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">         $WORDPRESS_DIR</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 复制配置文件</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">cp</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -r</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> $CURRENT_DIR</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/nginx/conf</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> $NGINX_DIR</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">cp</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -r</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> $CURRENT_DIR</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/mysql/conf</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> $MYSQL_DIR</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p>上述代码为shell脚本，请复制到脚本文件中执行</p></div><h2 id="编写dockerfile与相关配置" tabindex="-1"><a class="header-anchor" href="#编写dockerfile与相关配置"><span>编写Dockerfile与相关配置</span></a></h2>`,7)),e(a,null,{default:p(()=>n[0]||(n[0]=[s("div",{class:"vp-steps"},[s("ol",null,[s("li",null,[i("mysql "),s("strong",null,"[Dockerfile | my.cnf]")])]),s("div",{class:"language-dockerfile line-numbers-mode","data-ext":"dockerfile","data-title":"dockerfile"},[s("button",{class:"copy",title:"复制代码","data-copied":"已复制"}),s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark vp-code"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#1E754F","--shiki-dark":"#4D9375"}},"FROM"),s("span",{style:{"--shiki-light":"#393A34","--shiki-dark":"#DBD7CAEE"}}," mysql:8.0.40")])])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"})])]),s("div",{class:"language-my.cnf line-numbers-mode","data-ext":"my.cnf","data-title":"my.cnf"},[s("button",{class:"copy",title:"复制代码","data-copied":"已复制"}),s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark vp-code"},[s("code",null,[s("span",{class:"line"},[s("span",null,"# For advice on how to change settings please see")]),i(`
`),s("span",{class:"line"},[s("span",null,"# http://dev.mysql.com/doc/refman/8.0/en/server-configuration-defaults.html")]),i(`
`),s("span",{class:"line"},[s("span")]),i(`
`),s("span",{class:"line"},[s("span",null,"[mysql]")]),i(`
`),s("span",{class:"line"},[s("span")]),i(`
`),s("span",{class:"line"},[s("span",null,"default-character_set=utf8mb4")]),i(`
`),s("span",{class:"line"},[s("span")]),i(`
`),s("span",{class:"line"},[s("span",null,"[mysqld]")]),i(`
`),s("span",{class:"line"},[s("span",null,"#")]),i(`
`),s("span",{class:"line"},[s("span",null,"# Remove leading # and set to the amount of RAM for the most important data")]),i(`
`),s("span",{class:"line"},[s("span",null,"# cache in MySQL. Start at 70% of total RAM for dedicated server, else 10%.")]),i(`
`),s("span",{class:"line"},[s("span",null,"# innodb_buffer_pool_size = 128M")]),i(`
`),s("span",{class:"line"},[s("span",null,"#")]),i(`
`),s("span",{class:"line"},[s("span",null,"# Remove leading # to turn on a very important data integrity option: logging")]),i(`
`),s("span",{class:"line"},[s("span",null,"# changes to the binary log between backups.")]),i(`
`),s("span",{class:"line"},[s("span",null,"# log_bin")]),i(`
`),s("span",{class:"line"},[s("span",null,"#")]),i(`
`),s("span",{class:"line"},[s("span",null,"# Remove leading # to set options mainly useful for reporting servers.")]),i(`
`),s("span",{class:"line"},[s("span",null,"# The server defaults are faster for transactions and fast SELECTs.")]),i(`
`),s("span",{class:"line"},[s("span",null,"# Adjust sizes as needed, experiment to find the optimal values.")]),i(`
`),s("span",{class:"line"},[s("span",null,"# join_buffer_size = 128M")]),i(`
`),s("span",{class:"line"},[s("span",null,"# sort_buffer_size = 2M")]),i(`
`),s("span",{class:"line"},[s("span",null,"# read_rnd_buffer_size = 2M")]),i(`
`),s("span",{class:"line"},[s("span")]),i(`
`),s("span",{class:"line"},[s("span",null,"# Remove leading # to revert to previous value for default_authentication_plugin,")]),i(`
`),s("span",{class:"line"},[s("span",null,"# this will increase compatibility with older clients. For background, see:")]),i(`
`),s("span",{class:"line"},[s("span",null,"# https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_default_authentication_plugin")]),i(`
`),s("span",{class:"line"},[s("span",null,"# default-authentication-plugin=mysql_native_password")]),i(`
`),s("span",{class:"line"},[s("span",null,"skip-host-cache")]),i(`
`),s("span",{class:"line"},[s("span",null,"skip-name-resolve")]),i(`
`),s("span",{class:"line"},[s("span",null,"datadir=/var/lib/mysql")]),i(`
`),s("span",{class:"line"},[s("span",null,"socket=/var/run/mysqld/mysqld.sock")]),i(`
`),s("span",{class:"line"},[s("span",null,"secure-file-priv=/var/lib/mysql-files")]),i(`
`),s("span",{class:"line"},[s("span",null,"user=mysql")]),i(`
`),s("span",{class:"line"},[s("span",null,"# 表名忽略大小写")]),i(`
`),s("span",{class:"line"},[s("span",null,"lower_case_table_names=1")]),i(`
`),s("span",{class:"line"},[s("span",null,"# 设置字符集")]),i(`
`),s("span",{class:"line"},[s("span",null,"character-set-server=utf8mb4")]),i(`
`),s("span",{class:"line"},[s("span",null,"# 设置排序规则")]),i(`
`),s("span",{class:"line"},[s("span",null,"collation-server=utf8mb4_general_ci")]),i(`
`),s("span",{class:"line"},[s("span")]),i(`
`),s("span",{class:"line"},[s("span",null,"pid-file=/var/run/mysqld/mysqld.pid")]),i(`
`),s("span",{class:"line"},[s("span",null,"[client]")]),i(`
`),s("span",{class:"line"},[s("span",null,"socket=/var/run/mysqld/mysqld.sock")]),i(`
`),s("span",{class:"line"},[s("span")]),i(`
`),s("span",{class:"line"},[s("span",null,"default-character_set=utf8mb4")]),i(`
`),s("span",{class:"line"},[s("span")]),i(`
`),s("span",{class:"line"},[s("span",null,"!includedir /etc/mysql/conf.d/")])])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])]),s("ol",{start:"2"},[s("li",null,[i("nginx "),s("strong",null,"[Dockerfile | nginx.conf]")])]),s("div",{class:"language-dockerfile line-numbers-mode","data-ext":"dockerfile","data-title":"dockerfile"},[s("button",{class:"copy",title:"复制代码","data-copied":"已复制"}),s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark vp-code"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#1E754F","--shiki-dark":"#4D9375"}},"FROM"),s("span",{style:{"--shiki-light":"#393A34","--shiki-dark":"#DBD7CAEE"}}," nginx:1.27.2")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#1E754F","--shiki-dark":"#4D9375"}},"RUN"),s("span",{style:{"--shiki-light":"#393A34","--shiki-dark":"#DBD7CAEE"}}," groupadd -g 1000 ubuntu && \\")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#393A34","--shiki-dark":"#DBD7CAEE"}},"    useradd -u 1000 -g 1000 -m -s /bin/bash ubuntu && \\")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#393A34","--shiki-dark":"#DBD7CAEE"}},"    chown -R ubuntu:ubuntu /var/cache/nginx")])])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])]),s("div",{class:"language-nginx.conf line-numbers-mode","data-ext":"nginx.conf","data-title":"nginx.conf"},[s("button",{class:"copy",title:"复制代码","data-copied":"已复制"}),s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark vp-code"},[s("code",null,[s("span",{class:"line"},[s("span",null,"# user  nginx;")]),i(`
`),s("span",{class:"line"},[s("span",null,"worker_processes  auto;")]),i(`
`),s("span",{class:"line"},[s("span")]),i(`
`),s("span",{class:"line"},[s("span",null,"error_log  /nginx/log/error.log notice;")]),i(`
`),s("span",{class:"line"},[s("span",null,"pid        /nginx/nginx.pid;")]),i(`
`),s("span",{class:"line"},[s("span")]),i(`
`),s("span",{class:"line"},[s("span")]),i(`
`),s("span",{class:"line"},[s("span",null,"events {")]),i(`
`),s("span",{class:"line"},[s("span",null,"    worker_connections  1024;")]),i(`
`),s("span",{class:"line"},[s("span",null,"}")]),i(`
`),s("span",{class:"line"},[s("span")]),i(`
`),s("span",{class:"line"},[s("span")]),i(`
`),s("span",{class:"line"},[s("span",null,"http {")]),i(`
`),s("span",{class:"line"},[s("span",null,"    include       /etc/nginx/mime.types;")]),i(`
`),s("span",{class:"line"},[s("span",null,"    default_type  application/octet-stream;")]),i(`
`),s("span",{class:"line"},[s("span")]),i(`
`),s("span",{class:"line"},[s("span",null,`    log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '`)]),i(`
`),s("span",{class:"line"},[s("span",null,`                      '$status $body_bytes_sent "$http_referer" '`)]),i(`
`),s("span",{class:"line"},[s("span",null,`                      '"$http_user_agent" "$http_x_forwarded_for"';`)]),i(`
`),s("span",{class:"line"},[s("span")]),i(`
`),s("span",{class:"line"},[s("span",null,"    access_log  /nginx/log/access.log  main;")]),i(`
`),s("span",{class:"line"},[s("span")]),i(`
`),s("span",{class:"line"},[s("span",null,"    sendfile        on;")]),i(`
`),s("span",{class:"line"},[s("span",null,"    #tcp_nopush     on;")]),i(`
`),s("span",{class:"line"},[s("span")]),i(`
`),s("span",{class:"line"},[s("span",null,"    keepalive_timeout  65;")]),i(`
`),s("span",{class:"line"},[s("span")]),i(`
`),s("span",{class:"line"},[s("span",null,"    ##")]),i(`
`),s("span",{class:"line"},[s("span",null,"    # SSL Settings")]),i(`
`),s("span",{class:"line"},[s("span",null,"    ##")]),i(`
`),s("span",{class:"line"},[s("span",null,"    ssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3; # Dropping SSLv3, ref: POODLE")]),i(`
`),s("span",{class:"line"},[s("span",null,"    ssl_prefer_server_ciphers on;")]),i(`
`),s("span",{class:"line"},[s("span")]),i(`
`),s("span",{class:"line"},[s("span",null,"    ##")]),i(`
`),s("span",{class:"line"},[s("span",null,"    # Gzip Settings")]),i(`
`),s("span",{class:"line"},[s("span",null,"    ##")]),i(`
`),s("span",{class:"line"},[s("span",null,"    gzip  on;")]),i(`
`),s("span",{class:"line"},[s("span",null,"    gzip_min_length 1k;     # 设置允许压缩的页面最小字节数")]),i(`
`),s("span",{class:"line"},[s("span",null,"    gzip_buffers 4 16k;     # 用来存储 gzip 的压缩结果")]),i(`
`),s("span",{class:"line"},[s("span",null,"    gzip_http_version 1.1;  # 识别 HTTP 协议版本")]),i(`
`),s("span",{class:"line"},[s("span",null,"    gzip_comp_level 2;      # 设置 gzip 的压缩比 1-9. 1 压缩比最小但最快, 而 9 相反")]),i(`
`),s("span",{class:"line"},[s("span",null,"    gzip_types text/plain application/x-javascript text/css application/xml application/javascript; # 指定压缩类型")]),i(`
`),s("span",{class:"line"},[s("span",null,"    gzip_proxied any;       # 无论后端服务器的 headers 头返回什么信息，都无条件启用压缩")]),i(`
`),s("span",{class:"line"},[s("span",null,"    # gzip_vary on;")]),i(`
`),s("span",{class:"line"},[s("span",null,"    # gzip_proxied any;")]),i(`
`),s("span",{class:"line"},[s("span",null,"    # gzip_comp_level 6;")]),i(`
`),s("span",{class:"line"},[s("span",null,"    # gzip_buffers 16 8k;")]),i(`
`),s("span",{class:"line"},[s("span",null,"    # gzip_http_version 1.1;")]),i(`
`),s("span",{class:"line"},[s("span",null,"    # gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;")]),i(`
`),s("span",{class:"line"},[s("span")]),i(`
`),s("span",{class:"line"},[s("span",null,"    ##")]),i(`
`),s("span",{class:"line"},[s("span",null,"    # Virtual Host Configs")]),i(`
`),s("span",{class:"line"},[s("span",null,"    ##")]),i(`
`),s("span",{class:"line"},[s("span",null,"    include /etc/nginx/conf.d/*.conf;")]),i(`
`),s("span",{class:"line"},[s("span",null,"}")])])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])]),s("ol",{start:"3"},[s("li",null,[i("wordpress "),s("strong",null,"[Dockerfile | uploads.ini]")])]),s("div",{class:"language-dockerfile line-numbers-mode","data-ext":"dockerfile","data-title":"dockerfile"},[s("button",{class:"copy",title:"复制代码","data-copied":"已复制"}),s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark vp-code"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#1E754F","--shiki-dark":"#4D9375"}},"FROM"),s("span",{style:{"--shiki-light":"#393A34","--shiki-dark":"#DBD7CAEE"}}," wordpress:latest")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#1E754F","--shiki-dark":"#4D9375"}},"COPY"),s("span",{style:{"--shiki-light":"#393A34","--shiki-dark":"#DBD7CAEE"}}," config/uploads.ini /usr/local/etc/php/conf.d")])])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])]),s("div",{class:"language-uploads.ini line-numbers-mode","data-ext":"uploads.ini","data-title":"uploads.ini"},[s("button",{class:"copy",title:"复制代码","data-copied":"已复制"}),s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark vp-code"},[s("code",null,[s("span",{class:"line"},[s("span",null,"file_uploads = On")]),i(`
`),s("span",{class:"line"},[s("span",null,"memory_limit = 1000M")]),i(`
`),s("span",{class:"line"},[s("span",null,"upload_max_filesize = 100M")]),i(`
`),s("span",{class:"line"},[s("span",null,"post_max_size = 100M")]),i(`
`),s("span",{class:"line"},[s("span",null,"max_execution_time = 600")])])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])])],-1)])),_:1}),n[3]||(n[3]=l(`<h2 id="编写docker-compose配置文件-compose-yaml" tabindex="-1"><a class="header-anchor" href="#编写docker-compose配置文件-compose-yaml"><span>编写docker compose配置文件 compose.yaml</span></a></h2><div class="language-yaml line-numbers-mode" data-ext="yaml" data-title="yaml"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">services</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  mysql</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    build</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      context</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> mysql</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      dockerfile</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Dockerfile</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    image</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> mysql:8.0.40</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    container_name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> mysql</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    privileged</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> true</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    user</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 1000:1000</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    networks</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker_net0</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    ports</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      -</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">3306:3306</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    environment</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      TZ</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Asia/Shanghai</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      MYSQL_ROOT_PASSWORD</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> admin@123456</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      MYSQL_DATABASE</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> wordpress</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 默认创建并使用wordpress数据库</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    command</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">      # 将mysql8.0默认密码策略 修改为 原先 策略 (mysql8.0对其默认策略做了更改 会导致密码无法匹配)</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      --default-authentication-plugin=mysql_native_password</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      --explicit_defaults_for_timestamp=true</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    volumes</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">      # 数据挂载</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> \${HOME}/data/mysql/data:/var/lib/mysql</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">      # 配置挂载</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> \${HOME}/data/mysql/conf/my.cnf:/etc/my.cnf</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">      # 日志挂载</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> \${HOME}/data/mysql/log:/var/log/mysql</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  nginx</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    build</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      context</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      dockerfile</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Dockerfile</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    image</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> \${PROJECT_NAME:-shaoc}/nginx:1.27.2</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    container_name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> \${PROJECT_NAME:-shaoc}-nginx</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    privileged</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> true</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    # non-root users are not allowed to bind to ports below 1024</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    # network_mode: &quot;host&quot;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    user</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 1000:1000</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    networks</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker_net0</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    ports</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      -</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">80:80</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      -</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">443:443</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    environment</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      TZ</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Asia/Shanghai</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    volumes</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">      # nginx目录挂载</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> \${HOME}/data/nginx:/nginx:rw</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">      # 配置文件挂载</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> \${HOME}/data/nginx/conf/nginx.conf:/etc/nginx/nginx.conf:rw</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">      # 配置目录挂载</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> \${HOME}/data/nginx/conf/conf.d:/etc/nginx/conf.d</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  wordpress</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    build</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      context</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> wordpress</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      dockerfile</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Dockerfile</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    image</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> \${PROJECT_NAME:-shaoc}/wordpress:latest</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    container_name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> \${PROJECT_NAME:-shaoc}-wordpress</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    privileged</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> true</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    user</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 1000:1000</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    networks</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker_net0</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    ports</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      -</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">8080:80</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    environment</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      TZ</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Asia/Shanghai</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      WORDPRESS_DB_HOST</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> mysql</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      WORDPRESS_DB_USER</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      WORDPRESS_DB_PASSWORD</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> admin@123456</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">      WORDPRESS_DB_NAME</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> wordpress</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    volumes</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> \${HOME}/data/wordpress:/var/www/html</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">networks</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  docker_net0</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="构建镜像并启动容器" tabindex="-1"><a class="header-anchor" href="#构建镜像并启动容器"><span>构建镜像并启动容器</span></a></h2><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> compose</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> up</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --build</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -d</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 注意要在compose.yaml文件的同级目录下执行该命令</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p>docker compose logs 查看容器日志</p></div><h2 id="配置反向代理" tabindex="-1"><a class="header-anchor" href="#配置反向代理"><span>配置反向代理</span></a></h2>`,6)),e(a,null,{default:p(()=>n[1]||(n[1]=[s("div",{class:"hint-container tip"},[s("p",{class:"hint-container-title"},"提示"),s("p",null,"请提前准备好域名和SSL证书")],-1),s("p",null,"在$HOME/data/nginx/conf/conf.d目录下新建一个配置文件",-1),s("div",{class:"language-conf line-numbers-mode","data-ext":"conf","data-title":"conf"},[s("button",{class:"copy",title:"复制代码","data-copied":"已复制"}),s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark vp-code"},[s("code",null,[s("span",{class:"line"},[s("span",null,"server {")]),i(`
`),s("span",{class:"line"},[s("span",null,"    listen 80;")]),i(`
`),s("span",{class:"line"},[s("span",null,"    server_name yourdomain.com; # 填写自己的域名")]),i(`
`),s("span",{class:"line"},[s("span",null,"    return 301 https://$host$request_uri;")]),i(`
`),s("span",{class:"line"},[s("span",null,"}")]),i(`
`),s("span",{class:"line"},[s("span")]),i(`
`),s("span",{class:"line"},[s("span",null,"server {")]),i(`
`),s("span",{class:"line"},[s("span",null,"    listen 443 ssl;")]),i(`
`),s("span",{class:"line"},[s("span",null,"    server_name yourdomain.com; # 填写自己的域名")]),i(`
`),s("span",{class:"line"},[s("span")]),i(`
`),s("span",{class:"line"},[s("span",null,"    # 把ssl证书放在$HOME/data/nginx/cert目录下即可")]),i(`
`),s("span",{class:"line"},[s("span",null,"    ssl_certificate /nginx/cert/your.pem; #这里是ssl key文件存放的绝对路径，根据自己的文件名称和路径来写")]),i(`
`),s("span",{class:"line"},[s("span",null,"    ssl_certificate_key /nginx/cert/your.key; #这里是ssl key文件存放的绝对路径，根据自己的文件名称和路径来写")]),i(`
`),s("span",{class:"line"},[s("span")]),i(`
`),s("span",{class:"line"},[s("span",null,"    ssl_protocols TLSv1.2 TLSv1.3;")]),i(`
`),s("span",{class:"line"},[s("span")]),i(`
`),s("span",{class:"line"},[s("span",null,"    ssl_session_cache shared:SSL:1m;")]),i(`
`),s("span",{class:"line"},[s("span",null,"    ssl_session_timeout 5m;")]),i(`
`),s("span",{class:"line"},[s("span")]),i(`
`),s("span",{class:"line"},[s("span",null,"    ssl_ciphers HIGH:!aNULL:!MD5;")]),i(`
`),s("span",{class:"line"},[s("span",null,"    ssl_prefer_server_ciphers on;")]),i(`
`),s("span",{class:"line"},[s("span")]),i(`
`),s("span",{class:"line"},[s("span",null,"    location / {")]),i(`
`),s("span",{class:"line"},[s("span",null,"        proxy_set_header Host $http_host;")]),i(`
`),s("span",{class:"line"},[s("span",null,"        proxy_set_header X-Real-IP $remote_addr;")]),i(`
`),s("span",{class:"line"},[s("span",null,"        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;")]),i(`
`),s("span",{class:"line"},[s("span",null,"        proxy_set_header X-Forwarded-Proto $scheme;")]),i(`
`),s("span",{class:"line"},[s("span",null,"        client_max_body_size 100m;")]),i(`
`),s("span",{class:"line"},[s("span")]),i(`
`),s("span",{class:"line"},[s("span",null,"        proxy_pass http://wordpress;")]),i(`
`),s("span",{class:"line"},[s("span",null,"    }")]),i(`
`),s("span",{class:"line"},[s("span",null,"}")])])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1)])),_:1}),n[4]||(n[4]=s("h2",{id:"配置wordpress",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#配置wordpress"},[s("span",null,"配置wordpress")])],-1)),n[5]||(n[5]=s("p",null,[i("浏览器输入 "),s("strong",null,"yourdomain.com"),i("，一路自定义即可")],-1))])}const v=t(k,[["render",c],["__file","index.html.vue"]]),m=JSON.parse('{"path":"/article/vz8dqxud/","title":"Docker安装wordpress并配置反向代理","lang":"zh-CN","frontmatter":{"title":"Docker安装wordpress并配置反向代理","tags":["docker","wordpress","nginx"],"createTime":"2024/12/25 22:19:16","permalink":"/article/vz8dqxud/","draft":true,"description":"注意 以下操作都在Ubuntu环境下进行，也可在其他Linux系统下操作，出现问题请自行解决。 注意 使用non-root用户启动容器，请提前创建好[uid:1000 gid:1000]的用户，可使用id命令查看当前用户是否符合。如果没有可使用以下命令创建，当然也可以修改compose.yaml中的user配置为你当前的用户 提示 已打包相关脚本与配置...","head":[["meta",{"property":"og:url","content":"https://blog.shaocz.me/article/vz8dqxud/"}],["meta",{"property":"og:site_name","content":"未眠的蓝鸟"}],["meta",{"property":"og:title","content":"Docker安装wordpress并配置反向代理"}],["meta",{"property":"og:description","content":"注意 以下操作都在Ubuntu环境下进行，也可在其他Linux系统下操作，出现问题请自行解决。 注意 使用non-root用户启动容器，请提前创建好[uid:1000 gid:1000]的用户，可使用id命令查看当前用户是否符合。如果没有可使用以下命令创建，当然也可以修改compose.yaml中的user配置为你当前的用户 提示 已打包相关脚本与配置..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-12-26T03:39:02.000Z"}],["meta",{"property":"article:tag","content":"docker"}],["meta",{"property":"article:tag","content":"wordpress"}],["meta",{"property":"article:tag","content":"nginx"}],["meta",{"property":"article:modified_time","content":"2024-12-26T03:39:02.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Docker安装wordpress并配置反向代理\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-12-26T03:39:02.000Z\\",\\"author\\":[]}"]]},"headers":[],"readingTime":{"minutes":3.86,"words":1159},"git":{"updatedTime":1735184342000,"contributors":[{"name":"huaihuashu","username":"huaihuashu","email":"october4th@88.com","commits":4,"avatar":"https://avatars.githubusercontent.com/huaihuashu?v=4","url":"https://github.com/huaihuashu"}]},"autoDesc":true,"filePathRelative":"docker/Docker安装wordpress并配置反向代理.md","categoryList":[{"id":"05b605","sort":10000,"name":"docker"}],"bulletin":false}');export{v as comp,m as data};
